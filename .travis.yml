language: cpp
compiler: 
    - gcc
    - clang
os: 
    - linux
    - osx
    
arch: amd64 
dist: bionic
env:
    - CXX_STANDARD=c++17

jobs:
  allow_failures:
    - os: osx

    
addons:
  apt:
    packages:
        - g++-7
        - libboost-all-dev
        - cmake-data
        - cmake

before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update          ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install boost --c++17 ; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install cmake ; fi
  
script:
    - cmake .
    - make
    - ./findncopy -i data -o selected -n star_list.txt -e sky
    - ./threshold -i selected -o spectra -t 1
    - ./trim -l 4700 -u 4800 -i data -o spectra_trimmed
    - ./der_snr -d data -o all_snr.csv
    - ./der_snr -d spectra -o selected_snr.csv
    - ./shift -h
    
notifications:
  email: false

      
